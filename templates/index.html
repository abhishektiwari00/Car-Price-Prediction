<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Car Price Prediction</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
          boxShadow: {
            'glow': '0 0 45px rgba(129, 140, 248, 0.35)',
          },
        }
      }
    }
  </script>
  <style>
    /* Simple floating animation for background elements */
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-12px); }
    }
    @keyframes pulse-soft {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.6; }
    }
  </style>
</head>
<body class="min-h-screen relative overflow-hidden bg-slate-950 text-slate-100">

  <!-- Glowing gradient background blobs -->
  <div class="pointer-events-none absolute inset-0 -z-20">
    <div class="absolute -top-40 -left-32 w-96 h-96 bg-indigo-500 rounded-full mix-blend-screen blur-[140px] opacity-40 animate-[float_18s_ease-in-out_infinite]"></div>
    <div class="absolute top-1/2 -right-40 w-[520px] h-[520px] bg-purple-500 rounded-full mix-blend-screen blur-[170px] opacity-35 animate-[float_24s_ease-in-out_infinite]"></div>
    <div class="absolute bottom-[-120px] left-1/4 w-[460px] h-[460px] bg-sky-500 rounded-full mix-blend-screen blur-[160px] opacity-30 animate-[float_20s_ease-in-out_infinite]"></div>
  </div>

  <!-- Subtle dotted grid overlay -->
  <div class="pointer-events-none absolute inset-0 -z-10 opacity-[0.07] bg-[radial-gradient(circle,_#ffffff_1px,_transparent_1px)] bg-[size:18px_18px]"></div>

  <!-- Top gradient bar -->
  <div class="absolute inset-x-0 top-0 h-40 bg-gradient-to-b from-slate-900/80 via-slate-900/30 to-transparent -z-10"></div>

  <div class="relative max-w-6xl mx-auto px-4 py-6 md:py-10">
    <!-- App header -->
    <header class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6 md:mb-8">
      <div class="flex items-center gap-3">
        <div class="relative">
          <div class="w-11 h-11 rounded-2xl bg-gradient-to-tr from-indigo-500 via-violet-500 to-sky-400 flex items-center justify-center shadow-glow shadow-indigo-500/30">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 15.75 4.5 9h15l.75 6.75M6 18.75h12M8.25 9 9 5.25h6L15.75 9"/>
            </svg>
          </div>
          <span class="absolute -bottom-1 -right-1 inline-flex h-5 items-center rounded-full bg-emerald-400/90 px-1.5 text-[9px] font-semibold text-slate-900 ring-2 ring-slate-950">
            ML
          </span>
        </div>
        <div>
          <p class="text-[11px] uppercase tracking-[0.2em] text-slate-400">Auto Insights</p>
          <h1 class="text-2xl sm:text-3xl md:text-4xl font-semibold tracking-tight text-white">
            Car Price Prediction
          </h1>
          <p class="mt-1 text-xs sm:text-sm text-slate-400">
            Keras regression model using
            <code class="px-1.5 py-0.5 rounded bg-slate-800/70 text-[11px] border border-slate-700/70">
              CarPrice_Assignment.csv
            </code>
          </p>
        </div>
      </div>

      <div class="flex flex-col items-start sm:items-end gap-1.5 text-xs">
        <div class="flex flex-wrap items-center gap-2">
          <span class="inline-flex items-center rounded-full px-3 py-1 text-[11px] font-medium shadow-sm border
            {% if api_status == 'ok' %}
              bg-emerald-500/10 text-emerald-300 border-emerald-400/50
            {% else %}
              bg-red-500/10 text-red-300 border-red-400/50
            {% endif %}
          ">
            <span class="relative flex h-2 w-2 mr-1.5">
              <span class="absolute inline-flex h-full w-full rounded-full
                {% if api_status == 'ok' %} bg-emerald-400 {% else %} bg-red-400 {% endif %}
                opacity-70 animate-[pulse-soft_1.6s_ease-in-out_infinite]">
              </span>
              <span class="relative inline-flex h-2 w-2 rounded-full
                {% if api_status == 'ok' %} bg-emerald-300 {% else %} bg-red-300 {% endif %}">
              </span>
            </span>
            API: {{ api_status|upper }}
          </span>

          <span class="inline-flex items-center rounded-full px-3 py-1 text-[11px] font-medium bg-slate-900/70 border border-slate-700/80 text-slate-200">
            <svg class="w-3.5 h-3.5 mr-1" fill="none" stroke="currentColor" stroke-width="1.7" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 10h10M4 14h7M4 18h4"/>
            </svg>
            Features: <span class="ml-1 font-semibold text-indigo-300">{{ feature_count }}</span>
          </span>
        </div>
        <p class="text-[11px] text-slate-500">
          Health check:
          <code class="bg-slate-900/60 border border-slate-700 rounded px-1.5">
            GET /health
          </code>
        </p>
      </div>
    </header>

    <!-- Main card -->
    <main class="grid grid-cols-1 xl:grid-cols-[minmax(0,1.7fr)_minmax(0,1.1fr)] gap-5 md:gap-6 items-start">
      <!-- Left: Form + helper -->
      <section class="space-y-4 md:space-y-5">
        <div class="relative rounded-3xl border border-slate-800/60 bg-slate-900/70 backdrop-blur-xl shadow-2xl shadow-indigo-900/40 overflow-hidden">
          <!-- Decorative stripe -->
          <div class="absolute inset-x-0 top-0 h-[3px] bg-gradient-to-r from-indigo-400 via-sky-400 to-fuchsia-400"></div>

          <div class="p-4 md:p-6 lg:p-7">
            <div class="flex items-center justify-between mb-4">
              <div>
                <h2 class="text-sm font-semibold tracking-wide text-slate-100 flex items-center gap-2">
                  <span class="inline-flex h-6 w-6 items-center justify-center rounded-xl bg-indigo-500/20 border border-indigo-400/30">
                    <span class="text-[11px] font-semibold text-indigo-200">1</span>
                  </span>
                  Enter car specifications
                </h2>
                <p class="mt-1 text-[11px] text-slate-400">
                  Provide numeric details for your vehicle. All values are required.
                </p>
              </div>

              <div class="hidden md:flex items-center gap-2 text-[11px] text-slate-400">
                <span class="inline-flex items-center gap-1">
                  <span class="h-2 w-2 rounded-full bg-slate-500"></span> Engine
                </span>
                <span class="inline-flex items-center gap-1">
                  <span class="h-2 w-2 rounded-full bg-indigo-500"></span> Performance
                </span>
                <span class="inline-flex items-center gap-1">
                  <span class="h-2 w-2 rounded-full bg-emerald-500"></span> Dimensions
                </span>
              </div>
            </div>

            <form method="POST" action="{{ url_for('predict') }}" class="space-y-5">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3.5 md:gap-4 max-h-[410px] overflow-y-auto pr-1 md:pr-2 custom-scroll">
                {% for col in columns %}
                  <div class="group">
                    <label class="flex items-center justify-between mb-1.5">
                      <span class="block text-[11px] font-medium tracking-wide text-slate-300">
                        {{ col | replace('_', ' ') | capitalize }}
                      </span>
                      <span class="text-[10px] uppercase tracking-wider text-slate-500">
                        Required
                      </span>
                    </label>
                    <div class="relative">
                      <div class="pointer-events-none absolute inset-y-0 left-3 flex items-center">
                        <span class="inline-flex h-4 w-4 items-center justify-center rounded-md border border-slate-700/80 bg-slate-900/90 text-[9px] text-slate-300 group-focus-within:border-indigo-400 group-focus-within:text-indigo-200">
                          #
                        </span>
                      </div>
                      <input
                        type="number"
                        step="0.01"
                        name="{{ col }}"
                        value="{{ form_values.get(col, '') }}"
                        required
                        class="block w-full rounded-xl border border-slate-800 bg-slate-950/80 pl-9 pr-3 py-2.5 text-xs md:text-sm
                               text-slate-100 shadow-sm shadow-slate-950/60 placeholder:text-slate-500
                               focus:outline-none focus:ring-2 focus:ring-indigo-500/70 focus:border-indigo-400/80
                               transition-all duration-150"
                        placeholder="Enter {{ col | replace('_', ' ') }}"
                      />
                    </div>
                  </div>
                {% endfor %}
              </div>

              <div class="flex flex-col md:flex-row items-stretch md:items-center justify-between gap-3 pt-1.5">
                <div class="flex items-center gap-2 text-[11px] text-slate-500">
                  <span class="inline-flex items-center justify-center h-5 w-5 rounded-full bg-slate-900 border border-slate-700/70">
                    <svg class="w-3 h-3 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6l3 3m5-3a8 8 0 11-16 0 8 8 0 0116 0z"/>
                    </svg>
                  </span>
                  <span>
                    Typical values work best. Extreme outliers may reduce accuracy.
                  </span>
                </div>

                <div class="flex gap-2 justify-end">
                  <button
                    type="reset"
                    class="inline-flex items-center rounded-xl border border-slate-700/80 bg-slate-900/60 px-4 py-2 text-xs md:text-sm font-medium text-slate-200
                           hover:bg-slate-800/80 hover:border-slate-500/70 focus:outline-none focus:ring-2 focus:ring-slate-500/60 focus:ring-offset-1 focus:ring-offset-slate-950
                           transition-all duration-150"
                  >
                    Clear
                  </button>

                  <button
                    type="submit"
                    class="inline-flex items-center rounded-xl bg-gradient-to-r from-indigo-500 via-sky-500 to-fuchsia-500 px-5 py-2.5 text-xs md:text-sm font-semibold text-white
                           shadow-lg shadow-indigo-900/50 hover:brightness-110 focus:outline-none focus:ring-2 focus:ring-sky-400/70 focus:ring-offset-1 focus:ring-offset-slate-950
                           transition-all duration-150"
                  >
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" stroke-width="1.7" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                    Predict price
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>

        <!-- Tiny tips panel -->
        <div class="rounded-2xl border border-slate-800/80 bg-slate-950/80 backdrop-blur-md px-3.5 py-3 text-[11px] text-slate-400 flex items-start gap-2.5">
          <div class="mt-0.5">
            <span class="inline-flex h-6 w-6 items-center justify-center rounded-xl bg-sky-500/10 border border-sky-400/40 text-sky-300">
              ?
            </span>
          </div>
          <div class="space-y-1">
            <p class="font-semibold text-slate-200 flex items-center gap-1.5">
              Quick tips for better predictions
              <span class="inline-flex h-1 w-10 rounded-full bg-gradient-to-r from-sky-400 to-transparent"></span>
            </p>
            <ul class="list-disc list-inside space-y-0.5">
              <li>Use the same scale/units used while training (e.g., CC, BHP, mm, kg).</li>
              <li>Avoid leaving any field empty; all features are used by the model.</li>
              <li>If unsure, approximate using similar cars with known specs.</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Right: Prediction & model info -->
      <aside class="space-y-4 md:space-y-5">
        <!-- Prediction card -->
        <div class="relative rounded-3xl border border-slate-800/70 bg-slate-950/80 backdrop-blur-xl p-4 md:p-5 shadow-2xl shadow-black/60 overflow-hidden">
          <div class="pointer-events-none absolute -top-16 -right-10 w-48 h-48 rounded-full bg-emerald-500/15 blur-3xl"></div>
          <div class="pointer-events-none absolute -bottom-20 left-10 w-36 h-36 rounded-full bg-indigo-500/25 blur-3xl"></div>

          <div class="flex items-start justify-between mb-3.5">
            <div>
              <h2 class="text-sm font-semibold text-slate-100 flex items-center gap-2">
                <span class="inline-flex h-6 w-6 items-center justify-center rounded-xl bg-emerald-500/15 border border-emerald-400/40">
                  <svg class="w-3.5 h-3.5 text-emerald-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 17l6-6 4 4 8-8"/>
                  </svg>
                </span>
                Prediction
              </h2>
              <p class="text-[11px] text-slate-400 mt-1">
                Estimated selling price based on the provided specs.
              </p>
            </div>

            <span class="inline-flex items-center rounded-full bg-slate-900/80 border border-slate-700/80 px-2.5 py-1 text-[10px] font-medium text-slate-300">
              <svg class="w-3.5 h-3.5 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              Real-time model output
            </span>
          </div>

          {% if prediction is not none %}
            <div class="relative mt-2 mb-4 rounded-2xl border border-emerald-500/40 bg-gradient-to-br from-emerald-500/20 via-slate-950 to-slate-950/90 px-4 py-4 shadow-xl shadow-emerald-900/40">
              <p class="text-[11px] font-medium text-emerald-200 uppercase tracking-[0.22em] mb-1">
                Estimated price
              </p>
              <div class="flex items-baseline gap-1">
                <span class="text-xs text-emerald-300/80">$</span>
                <p class="text-3xl md:text-4xl font-semibold text-emerald-100 tabular-nums tracking-tight">
                  {{ prediction }}
                </p>
              </div>
              <p class="mt-1 text-[11px] text-emerald-100/75">
                Based on Keras regression model output.
              </p>

              <div class="mt-3 h-1.5 rounded-full bg-emerald-500/20 overflow-hidden">
                <div class="h-full w-[82%] bg-gradient-to-r from-emerald-400 via-emerald-300 to-sky-300 animate-[pulse-soft_2.2s_ease-in-out_infinite]"></div>
              </div>
            </div>

            <div class="text-[11px] text-slate-400 space-y-1.5">
              <p class="flex items-center gap-1.5">
                <span class="inline-flex h-4 w-4 items-center justify-center rounded-md bg-slate-900 border border-slate-700 text-[10px] text-slate-300">
                  i
                </span>
                Treat this value as an estimate; market conditions can shift actual prices.
              </p>
              <p>
                Try adjusting horsepower, engine size or car age to see how the predicted
                value reacts.
              </p>
            </div>

          {% elif error %}
            <div class="mt-2 rounded-2xl border border-red-500/40 bg-red-500/10 px-4 py-3 text-[12px] text-red-100">
              <p class="font-semibold mb-1.5 flex items-center gap-1.5">
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v4m0 4h.01M10.29 3.86 1.82 18a1 1 0 00.86 1.5h18.64a1 1 0 00.86-1.5L13.71 3.86a1 1 0 00-1.72 0z"/>
                </svg>
                Error
              </p>
              <p class="text-[11px] leading-relaxed">{{ error }}</p>
            </div>

            <p class="mt-3 text-[11px] text-slate-400">
              Check that all numeric fields are valid and within realistic ranges, then try again.
            </p>

          {% else %}
            <div class="mt-3 mb-4 rounded-2xl border border-slate-800/80 bg-slate-950/80 px-4 py-4 text-[12px] text-slate-300">
              <p class="font-medium mb-1.5">
                Ready when you are.
              </p>
              <p class="text-[11px] text-slate-400 mb-2">
                Fill in the car details on the left and click
                <span class="font-semibold text-slate-100">Predict price</span>.
              </p>
              <p class="text-[11px] text-slate-400">
                The model will estimate the selling price based on your numeric features such as
                engine size, horsepower, curb weight, and more.
              </p>
            </div>

            <div class="flex items-center gap-2 text-[11px] text-slate-500">
              <span class="inline-flex h-6 w-6 items-center justify-center rounded-full bg-indigo-500/15 border border-indigo-400/40">
                <svg class="w-3.5 h-3.5 text-indigo-200" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3 13.5h6L9 21l6-10.5H9L15 3"/>
                </svg>
              </span>
              <span>Use different configurations to compare how the predicted price changes.</span>
            </div>
          {% endif %}
        </div>

        <!-- Model details card -->
        <div class="rounded-3xl border border-slate-800/80 bg-slate-950/80 backdrop-blur-xl p-4 md:p-5 text-[11px] text-slate-300 space-y-3">
          <div class="flex items-center justify-between mb-1">
            <p class="font-semibold text-slate-100 text-xs flex items-center gap-2">
              Model overview
              <span class="inline-flex h-[1px] w-10 bg-gradient-to-r from-slate-500 to-transparent"></span>
            </p>
            <span class="inline-flex items-center rounded-full bg-slate-900/80 border border-slate-700/70 px-2 py-0.5 text-[10px] text-slate-400">
              <span class="h-1.5 w-1.5 rounded-full bg-sky-400 mr-1"></span>
              Keras Â· Regression
            </span>
          </div>

          <ul class="space-y-1.5">
            <li class="flex gap-2">
              <span class="mt-[2px] h-4 w-4 rounded-full bg-slate-900 border border-slate-700 flex items-center justify-center">
                <span class="h-2 w-2 rounded-full bg-emerald-400"></span>
              </span>
              <span>
                <span class="font-medium text-slate-100">Sequential regression network</span>
                &nbsp;using dense layers and non-linear activations.
              </span>
            </li>
            <li class="flex gap-2">
              <span class="mt-[2px] h-4 w-4 rounded-full bg-slate-900 border border-slate-700 flex items-center justify-center">
                <svg class="w-2.5 h-2.5 text-sky-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4 19h4l2-5 4 3 3-9 3 11h-4"/>
                </svg>
              </span>
              <span>
                Trained on curated numeric features (engine size, horsepower, dimensions, weight, etc.).
              </span>
            </li>
            <li class="flex gap-2">
              <span class="mt-[2px] h-4 w-4 rounded-full bg-slate-900 border border-slate-700 flex items-center justify-center">
                <svg class="w-2.5 h-2.5 text-violet-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4 7h16M4 12h16M4 17h10"/>
                </svg>
              </span>
              <span>
                API endpoint:
                <code class="bg-slate-900 border border-slate-700 rounded px-1 py-[1px] text-[10px] text-slate-200">
                  POST /predict
                </code>
              </span>
            </li>
          </ul>

          <div class="border-t border-slate-800/80 pt-2.5 mt-2.5 flex flex-wrap items-center justify-between gap-2">
            <div class="flex items-center gap-2 text-[10px] text-slate-500">
              <span class="inline-flex h-5 w-5 items-center justify-center rounded-full bg-slate-900 border border-slate-700">
                <svg class="w-3 h-3 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4 4h16v4H4zM4 10h10v4H4zM4 16h7v4H4z"/>
                </svg>
              </span>
              <span>Integrate this model with your own UI or backend service.</span>
            </div>
            <span class="inline-flex items-center rounded-full bg-slate-900/80 border border-slate-800 px-2 py-0.5 text-[10px] text-slate-400">
              Designed for experimentation and quick what-if analysis.
            </span>
          </div>
        </div>
      </aside>
    </main>
  </div>

  <!-- Optional: custom scrollbar styles -->
  <style>
    .custom-scroll::-webkit-scrollbar {
      width: 6px;
    }
    .custom-scroll::-webkit-scrollbar-track {
      background: transparent;
    }
    .custom-scroll::-webkit-scrollbar-thumb {
      background-color: rgba(148, 163, 184, 0.5);
      border-radius: 999px;
    }
  </style>
</body>
</html>
